<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.14.1 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>  Peter Wills</title>
<meta name="description" content="Source for pwills.com">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Peter Wills">
<meta property="og:title" content="">
<meta property="og:url" content="http://localhost:4000/portfolio/netcomp/">


  <meta property="og:description" content="Source for pwills.com">



  <meta property="og:image" content="http://localhost:4000/assets/images/code.jpg">





  <meta property="article:published_time" content="2018-01-04T00:00:00-07:00">






<link rel="canonical" href="http://localhost:4000/portfolio/netcomp/">













<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Peter Wills Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/">Peter Wills</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/" >Home</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li><li class="masthead__menu-item">
              <a href="/portfolio/" >Portfolio</a>
            </li><li class="masthead__menu-item">
              <a href="/assets/docs/resume.pdf" >Resume</a>
            </li><li class="masthead__menu-item">
              <a href="/blog/" >Blog</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  











<div class="page__hero--overlay"
  style=" background-image: url('/assets/images/code.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          

        
      </h1>
      
        <p class="page__lead">
</p>
      
      
      
      
    </div>
  
  
    <span class="page__hero-caption">Photo credit: <a href="https://unsplash.com"><strong>Marcus Spiske</strong></a>
</span>
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Projects</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/portfolio/social-networks/" class="">Anomaly Detection in Social Networks</a></li>
          
            
            

            
            

            <li><a href="/portfolio/netcomp/" class="active">NetComp: Python Network Comparison</a></li>
          
            
            

            
            

            <li><a href="/portfolio/genre_cls/" class="">Automatic Genre Classification</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Professional</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/portfolio/deskai" class="">DeskAI</a></li>
          
            
            

            
            

            <li><a href="/portfolio/sclm" class="">Smart Climate Index</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Research</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/portfolio/networks/" class="">Dynamic Anomaly Detection</a></li>
          
            
            

            
            

            <li><a href="/portfolio/qm_stats/" class="">Statistics of Entanglement</a></li>
          
            
            

            
            

            <li><a href="/portfolio/waves/" class="">Magnetic Waves and Noise</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="">
    <meta itemprop="description" content="">
    <meta itemprop="datePublished" content="January 04, 2018">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Contents</h4></header>
              <ul class="toc__menu">
  <li><a href="#netcomp-python-network-comparison">NetComp: Python Network Comparison</a>
    <ul>
      <li><a href="#usage">Usage</a></li>
      <li><a href="#design-principles">Design Principles</a></li>
      <li><a href="#distances-included-in-library">Distances Included in Library</a></li>
      <li><a href="#future-work">Future Work</a></li>
    </ul>
  </li>
</ul>
            </nav>
          </aside>
        
        <h1 id="netcomp-python-network-comparison">NetComp: Python Network Comparison</h1>

<p><em>(NetComp source code is available <a href="https://www.github.com/peterewills/netcomp">on GitHub</a>.)</em></p>

<p>As I worked on my research on <a href="/portfolio/networks">network data analysis</a>, it became clear that
there was a need for a Python library that implemented the analytical tools I
was interested in. The ubiquitous <a href="https://networkx.github.io/">NetworkX</a> package contains quite a few
metrics, but since it is such a popular package, it does not implement research
algorithms until they reach a high level of maturity. I decided to build
<a href="https://www.github.com/peterewills/netcomp">NetComp</a> in order to bridge this gap. You can get it locally via</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip install netcomp
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<p>In this demo, we’ll compare two Erdos-Renyi random graphs, and then compare an
Erdos-Renyi graph to a planted partition graph. We expect that the distance
between the latter pair should be greater than the distance between the former,
as they are drawn from distinct models. We’ll use graphs of size 100, and set
the parameters for the planted partition graphso that it has the same volume as
the Erdos-Renyi graph.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; import netcomp as nc
... import networkx as nx

&gt;&gt;&gt; G1 = nx.erdos_renyi_graph(100,0.1)
... G2 = nx.erdos_renyi_graph(100,0.1)
... G3 = nx.planted_partition_graph(2,50,0.19,0.01)

&gt;&gt;&gt; A1,A2,A3 = [nx.adjacency_matrix(G) for G in [G1,G2,G3]]

&gt;&gt;&gt; d0 = nc.lambda_dist(A1,A2,kind='laplacian_norm')
... d1 = nc.lambda_dist(A1,A3,kind='laplacian_norm')

&gt;&gt;&gt; print({:.03f}.format(d1/d0))

3.548
</code></pre></div></div>

<p>The first principal eigenvalue of the adjacency matrix is a signature for
two-community structure. Therefore, we expect performance to improve when we
compare using only the first principal eigenvalue. Let’s check:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; d0 = nc.lambda_dist(A1,A2,kind='laplacian_norm',k=2)
... d1 = nc.lambda_dist(A1,A3,kind='laplacian_norm',k=2)

&gt;&gt;&gt; print({:.03f}.format(d1/d0))

37.409
</code></pre></div></div>

<p>Performance increases by an order of magnitude. This sort of comparison can be
done using the adjacency or Laplacian spectrum (set using the <code class="highlighter-rouge">kind</code> keyword
argument), or via non-spectral distances. A complete list of included graph
distances is provided below.</p>

<h2 id="design-principles">Design Principles</h2>

<p>The guiding principles behind the library are:</p>

<ul>
  <li>
    <p><strong>Flexibility.</strong> Graphs can be input as either dense NumPy or sparse SciPy
arrays/matrices.</p>
  </li>
  <li>
    <p><strong>Speed.</strong> All algorithms must run in linear or near-linear time, and have
efficient implementations leveraging sparse data structures when appropriate.</p>
  </li>
</ul>

<p>I opted to utilize arrays as the fundamental data structure of the library,
rather than creating a custom <code class="highlighter-rouge">Graph</code> class or extending that of NetworkX. This
has some drawbacks in terms of flexibility; NetworkX supports arbitrary vertex
labels and edge properties, whereas using an array implicitly assumes integer
vertex labels. The benefit of such an approach, however, is that we avoid the
costly conversion to and from arrays, which is the format in which networks are
often encountered in application.</p>

<h2 id="distances-included-in-library">Distances Included in Library</h2>

<p>The graph distances included are:</p>

<ul>
  <li>
    <p><strong>Resistance Distance.</strong> Compares networks by looking at differences in their
resistance structure. Also included is the renormalized resistance distance,
which extends this metric to disconnected networks and networks of different
sizes. Our paper studying the properties of the renormalized resistance
distance can be found <a href="https://arxiv.org/abs/1707.07362">on the arXiv</a>.</p>
  </li>
  <li>
    <p><strong>DeltaCon.</strong> Another popular distance, <a href="https://arxiv.org/abs/1304.4657">DeltaCon</a> is comparable to the resistance
distance. It uses an alternative method of calculating node affinities, and
then looks compares the resulting structure for the two networks in question.</p>
  </li>
  <li>
    <p><strong>NetSimile.</strong> <a href="https://arxiv.org/abs/1209.2684">NetSimile</a> examines the statistics of a variety of local network
measures, and compares statistical properties (mean, standard deviation, etc.)
of these measures. We implement it as originally proposed, but this method is
highly extensible, and can include any network measure of interest.</p>
  </li>
  <li>
    <p><strong>Spectral Distances.</strong> These distances compare graphs via looking at the
spectrum (eigenvalues) of the various matrix representations of the graph. The
most common matrix representation of the graph is the adjacency matrix, but
this method is also implemented on the Laplacian, both in its normalized and
unnormalized forms.</p>
  </li>
  <li>
    <p><strong>Graph Edit Distance.</strong> Trivial to calculate, and implemented in NetworkX, but
we often use it as a baseline, so I included it.</p>
  </li>
</ul>

<p>Note that the vertex affinity matrices calculated by the resistance distance and
DeltaCon are themselves directly accessible. Also useful is a helper function
<code class="highlighter-rouge">_eigs</code> which calculates the <code class="highlighter-rouge">k</code> largest (or smallest) eigenvalues of a
symmetric matrix, using the appropriate method depending on the input data type
(sparse or dense) and the number of eigenvalues to be calculated.<sup id="fnref:fnote1"><a href="#fn:fnote1" class="footnote">1</a></sup></p>

<h2 id="future-work">Future Work</h2>

<p>The library is still in alpha, and is incomplete in its implementation of the
various algorithms. In particular, it lacks the fast implementation of the
resistance distance and DeltaCon, both of which are linear-time approximations
of the quadratic-time exact algorithms. The resistance distance approximation in
particular will rely on proper implementation of an
<a href="http://pyamg.github.io/">algebraic multigrid solver</a> for linear systems, which will be an involved
process to build. I look forward to working on it.</p>

<div class="footnotes">
  <ol>
    <li id="fn:fnote1">
      <p>This function must be imported directly via <code class="highlighter-rouge">from netcomp.linalg
import _eigs</code> <a href="#fnref:fnote1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-01-04T00:00:00-07:00">January 04, 2018</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/portfolio/networks/" class="pagination--pager" title="
">Previous</a>
    
    
      <a href="/portfolio/genre_cls/" class="pagination--pager" title="
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Peter Wills. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="http://localhost:4000/assets/js/main.min.js"></script>








<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>




  </body>
</html>
